<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><title>Connecting Virtual Machines to a VXLAN</title><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes"/><link rel="stylesheet" type="text/css" href="static/css/style.css"/>
<link rel="schema.DC" href="http://purl.org/dc/elements/1.1/"/><link rel="schema.DCTERMS" href="http://purl.org/dc/terms/"/>
<meta name="title" content="Connecting Virtual Machines to a VXLAN"/>
<meta name="description" content="The VXLAN protocol offers more than four thousand separate virtual networks where VMs can communicate"/>
<meta name="book-title" content="Connecting Virtual Machines to a VXLAN"/>
<meta name="tracker-url" content="https://bugzilla.suse.com/enter_bug.cgi"/>
<meta name="tracker-type" content="bsc"/>
<meta name="tracker-bsc-assignee" content="tbazant@suse.com"/>
<meta name="tracker-bsc-component" content="Documentation"/>
<meta name="tracker-bsc-product" content="SUSE Linux Enterprise Server 16.0"/>
<meta name="publisher" content="SUSE"/><meta name="DCTERMS.modified" content="2024-02-23"/><meta name="DC.creator" content="tbazant@suse.com"/><meta property="og:title" content="Connecting VMs to a VXLAN"/>
<meta property="og:description" content="Networking for large cloud computing deployments"/>
<meta property="og:type" content="article"/>
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Connecting VMs to a VXLAN"/>
<meta name="twitter:description" content="Networking for large cloud computing deployments"/>
<script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": ["TechArticle"],
    "image": "https://www.suse.com/assets/img/suse-white-logo-green.svg",
    
     "isPartOf": {
      "@type": "CreativeWorkSeries",
      "name": "Products &amp; Solutions"
    },
    
    "inLanguage": "en",
    

    "headline": "Connecting VMs to a VXLAN",
  
    "description": "The VXLAN protocol offers more than four thousand separate virtual networks where VMs can communicate",
      
    "author": [
      {
        "@type": "Corporation",
        "name": "SUSE Product &amp; Solution Documentation Team",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    ],
      
    "dateModified": "2024-02-23T00:00+02:00",
      
    "datePublished": "2024-02-23T00:00+02:00",
      

    "about": [
      {
        "@type": "Thing",
        "name": "Virtualization"
      },
      {
        "@type": "Thing",
        "name": "Configuration"
      }
    ],
  
    "mentions": [
      
      { "@type": "SoftwareApplication",
        "name": "SUSE Linux Enterprise Server",
        "softwareVersion": "15 SP6",
        "applicationCategory": "Operating System",
        "operatingSystem": "Linux",
        "processorRequirements": "AMD64/Intel 64, POWER"
        
      }
      
    ],
    
    "sameAs": [
          "https://www.facebook.com/SUSEWorldwide/about",
          "https://www.youtube.com/channel/UCHTfqIzPKz4f_dri36lAQGA",
          "https://twitter.com/SUSE",
          "https://www.linkedin.com/company/suse"
    ],
    "publisher": {
      "@type": "Corporation",
      "name": "SUSE",
      "url": "https://documentation.suse.com",
      "logo": {
        "@type": "ImageObject",
        "url": "https://www.suse.com/assets/img/suse-white-logo-green.svg"
      }
    }
  }</script>
<link rel="next" href="doc-gfdl-license.html" title="A. GNU Free Documentation License"/><script type="text/javascript">

if ( window.location.protocol.toLowerCase() != 'file:' ) {
  document.write('<link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"></link>');
};

</script><noscript><link rel="stylesheet" type="text/css" href="https://documentation.suse.com/docserv/res/fonts/poppins/poppins.css"/></noscript><script src="static/js/script-purejs.js" type="text/javascript"> </script><script src="static/js/highlight.min.js" type="text/javascript"> </script><script>

$(document).ready(function() {
  $('.verbatim-wrap.highlight').each(function(i, block) {
    hljs.highlightBlock(block);
  });
});
hljs.configure({
  useBR: false
});

</script></head><body class="draft wide offline js-off" onload="$('#betawarn-button-wrap').toggle();if (document.cookie.length > 0) {if (document.cookie.indexOf('betawarn=closed') != -1){$('#betawarn').toggle()}};"><div id="betawarn" style="position:fixed;bottom:0;z-index:9025;background-color:#FDE8E8;padding:1em;margin-left:10%;margin-right:10%;display:block;border-top:.75em solid #E11;width:80%"><p style="color:#333;margin:1em 0;padding:0;">This is a draft document that was built and uploaded automatically. It may document beta software and be incomplete or even incorrect. <strong>Use this document at your own risk.</strong></p> <div id="betawarn-button-wrap" style="display:none;margin:0;padding:0;"><a href="#" onclick="$('#betawarn').toggle();var d=new Date();d.setTime(d.getTime()+(0.5*24*60*60*1000));document.cookie='betawarn=closed; expires='+d.toUTCString()+'; path=/'; return false;" style="color:#333;text-decoration:underline;float:left;margin-top:.5em;padding:1em;display:block;background-color:#FABEBE;">I understand this is a draft</a></div></div><div class="bypass-block"><a href="#_content">Jump to content</a><a href="#_bottom-pagination">Jump to page navigation: previous page [access key p]/next page [access key n]</a></div><header id="_mainnav"><div class="growth-inhibitor"><img src="static/images/logo.svg" alt="Logo" class="logo"/></div></header><div class="crumbs"><div class="growth-inhibitor"><a class="crumb" href="index.html">Connecting Virtual Machines to a VXLAN</a></div></div><main id="_content"><nav id="_side-toc-overall" class="side-toc"><div class="side-title">Connecting Virtual Machines to a VXLAN</div> </nav><button id="_open-side-toc-overall" title="Contents"> </button><article class="documentation"><button id="_unfold-side-toc-page">On this page</button><section xml:lang="en" class="article" id="vxlan" data-id-title="Connecting Virtual Machines to a VXLAN"><div class="titlepage"><div><div><h1 class="title">Connecting Virtual Machines to a VXLAN</h1></div><div class="date"><span class="imprint-label">Publication Date: </span>24 Oct 2024</div><div><div class="abstract"><div class="variablelist"><dl class="variablelist"><dt id="id-1.1.13.1.1"><span class="term">WHAT?</span></dt><dd><p>
                The VXLAN protocol can address more isolated virtual networks
                than the traditional VLAN. Within these networks, groups of
                virtual machines (VMs) can safely communicate even across
              </p></dd><dt id="id-1.1.13.1.2"><span class="term">WHY?</span></dt><dd><p>
                You want to connect virtual machines to VXLAN networks in a
                large data center and configure them to communicate with other
                VMs in a dedicated network space.
              </p></dd><dt id="id-1.1.13.1.3"><span class="term">EFFORT</span></dt><dd><p>
                30 minutes is enough to learn and configure a VXLAN to enable
                communication between VMs.
              </p></dd><dt id="id-1.1.13.1.4"><span class="term">REQUIREMENTS</span></dt><dd><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
                    A <span class="phrase"><span class="phrase">SLES</span></span> <code class="systemitem">libvirt</code>-based VM Host Server with an
                    Ethernet network connection configured by NetworkManager.
                  </p></li></ul></div></dd></dl></div></div></div><div><div class="titlepage-revhistory"><a aria-label="Revision History" hreflang="en" href="rh-vxlan.html" target="_blank">Revision History: Connecting Virtual Machines to a VXLAN</a></div></div></div></div><section xml:lang="en" class="sect1" id="vxlan-introduction" data-id-title="Introduction"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">1 </span><span class="title-name">Introduction</span></span> <a title="Permalink" class="permalink" href="index.html#vxlan-introduction">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><section class="sect2" id="what-is-vlan" data-id-title="What is a VLAN?"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.1 </span><span class="title-name">What is a VLAN?</span></span> <a title="Permalink" class="permalink" href="index.html#what-is-vlan">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
      A <span class="emphasis"><em>virtual local area network</em></span> (VLAN) is a domain
      isolated within a <span class="emphasis"><em>local area network</em></span> (LAN) at the
      data link layer (layer-2). VLANs help keep network applications separate
      despite being connected to the same physical network. Also, there is no
      need for additional sets of cabling and networking devices to be deployed.
    </p></section><section class="sect2" id="what-is-vxlan" data-id-title="What is a VXLAN?"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.2 </span><span class="title-name">What is a VXLAN?</span></span> <a title="Permalink" class="permalink" href="index.html#what-is-vxlan">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
      A <span class="emphasis"><em>virtual extensible local area network</em></span> (VXLAN) is a
      network virtualization technology that addresses scalability limitations
      with large cloud computing deployments. While the VLAN protocol can
      address approximately four thousand virtual networks, VXLAN can address
      over 16 million virtual networks.
    </p></section><section class="sect2" id="how-does-vxlan-work" data-id-title="How does a VXLAN work?"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.3 </span><span class="title-name">How does a VXLAN work?</span></span> <a title="Permalink" class="permalink" href="index.html#how-does-vxlan-work">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
      A VXLAN creates network tunnels for VM communication. It encapsulates
      layer-2 network traffic within the UDP datagrams, using the default
      destination port number 4789. VMs that are the endpoints of the tunnel can
      communicate across different hosts or even data centers around the world.
    </p><div class="figure" id="id-1.2.4.3"><div class="figure-contents"><div class="mediaobject"><a href="images/vxlan-scheme.png"><img src="images/vxlan-scheme.png" width="75%" alt="Simple VXLAN scheme" title="Simple VXLAN scheme"/></a></div></div><div class="title-container"><div class="figure-title-wrap"><div class="figure-title"><span class="title-number-name"><span class="title-number">Figure 1: </span><span class="title-name">Simple VXLAN scheme </span></span><a title="Permalink" class="permalink" href="index.html#id-1.2.4.3">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></section><section class="sect2" id="benefits-of-vxlan" data-id-title="Benefits of using VXLAN"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.4 </span><span class="title-name">Benefits of using VXLAN</span></span> <a title="Permalink" class="permalink" href="index.html#benefits-of-vxlan">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
      VXLAN offers the following important benefits:
    </p><div class="itemizedlist"><ul class="itemizedlist"><li class="listitem"><p>
          With VXLAN, you can create over 16 million separated virtual
          networks. As a comparison, the traditional VLAN offers approximately
          four thousand networks.
        </p></li><li class="listitem"><p>
          Compared to VLANs which operate in data link layer (layer-2), VXLAN
          encapsulates layer-2 frames within IP packets to make use of existing
          network layer (layer-3) networks. This results in easier routing and
          administration, enabling VMs to connect to logical networks across
          different hosts or locations.
        </p></li><li class="listitem"><p>
          While the VLAN protocol requires a router or a
          layer-3 switch to enable communication between hosts in different
          VLANs, VXLAN does not require reconfiguring the existing network
          equipment as it spans across layer-3 boundaries and uses logical
          addressing, routing and packet forwarding.
        </p></li></ul></div></section><section class="sect2" id="procedure-vxlan" data-id-title="Procedure outline"><div class="titlepage"><div><div><div class="title-container"><h3 class="title"><span class="title-number-name"><span class="title-number">1.5 </span><span class="title-name">Procedure outline</span></span> <a title="Permalink" class="permalink" href="index.html#procedure-vxlan">#</a></h3><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p>
      To connect a VM to a VXLAN network, you need to complete the following
      steps on the VM Host Server:
    </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
          Create a network bridge with a VXLAN attached.
        </p></li><li class="step"><p>
          Create a virtual network attached to the existing bridge.
        </p></li><li class="step"><p>
          Configure the VM to use the VXLAN network via the virtual network
          attached to the network bridge.
        </p></li></ol></div></div></section></section><section xml:lang="en" class="sect1" id="vxlan-configure-bridge" data-id-title="Creating a network bridge with a VXLAN attached"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">2 </span><span class="title-name">Creating a network bridge with a VXLAN attached</span></span> <a title="Permalink" class="permalink" href="index.html#vxlan-configure-bridge">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div><div><div class="abstract"/></div></div></div><p>
    To make the communication with VXLAN more transparent, virtual machines
    use a network bridge to which the VXLAN is attached. Run the following
    procedure on the VM Host Server.
  </p><div class="procedure"><div class="procedure-contents"><ol class="procedure" type="1"><li class="step"><p>
        Create the network bridge <code class="literal">br0</code> with no IPv4 and IPv6
        addresses assigned.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> nmcli connection add type bridge con-name br0 ifname br0 \
ipv4.method disabled<span class="callout" id="vxlan-configure-bridge-ipv4">1</span> ipv6.method disabled<span class="callout" id="vxlan-configure-bridge-ipv6">2</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#vxlan-configure-bridge-ipv4"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Prevents assigning an IPv4 address on the bridge.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#vxlan-configure-bridge-ipv6"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Prevents assigning an IPv6 address on the bridge.
          </p></td></tr></table></div><div id="id-1.3.3.1.4" data-id-title="Custom destination port" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Custom destination port</div><p>
          NetworkManager uses 8472 as the default destination port. To specify a different
          destination port, pass the option <code class="option">destination-port
          <em class="replaceable">PORT_NUMBER</em></code> to the command.
        </p></div></li><li class="step"><p>
        Create a VXLAN network interface attached to the bridge
        <code class="literal">br0</code>.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> nmcli connection add type vxlan slave-type bridge con-name vxlan1-br0 \
ifname vxlan1<span class="callout" id="vxlan-configure-bridge-ifname">1</span> id 1<span class="callout" id="vxlan-configure-bridge-id">2</span> local 192.10.3.1<span class="callout" id="vxlan-configure-bridge-local">3</span> \
remote 10.5.0.2<span class="callout" id="vxlan-configure-bridge-remote">4</span> master br0<span class="callout" id="vxlan-configure-bridge-master">5</span></pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#vxlan-configure-bridge-ifname"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Specifies the interface name for the VXLAN connection. This is the
            name that will be assigned to the VXLAN interface.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#vxlan-configure-bridge-id"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Specifies a unique numeric VXLAN identifier to differentiate between
            different VXLAN networks.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#vxlan-configure-bridge-local"><span class="callout">3</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Specifies the local IP address to be used for the VXLAN interface.
            This is the IP address that NetworkManager will use for the local VXLAN
            endpoint. This address must be reachable by the VMs that will be
            using the VXLAN network.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#vxlan-configure-bridge-remote"><span class="callout">4</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Specifies the remote IP address of the VXLAN endpoint with which the
            local VXLAN interface will communicate. This address must be
            reachable by the VM Host Server that hosts the VMs that will be using the
            VXLAN network.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#vxlan-configure-bridge-master"><span class="callout">5</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            Specifies the name of the bridge device to which the VXLAN interface
            will be attached. This is typically the bridge device that acts as
            the VXLAN endpoint.
          </p></td></tr></table></div><div id="id-1.3.3.2.4" data-id-title="Multiple VXLANs attached to a single bridge" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Multiple VXLANs attached to a single bridge</div><p>
          You can attach multiple VXLAN interfaces to a single bridge device. In
          this case, VMs on a single VM Host Server can belong to different VXLANs.
        </p></div></li><li class="step"><p>
        Activate the bridge <code class="literal">br0</code>.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> nmcli connection up br0</pre></div></li><li class="step"><p>
        If <code class="systemitem">firewalld</code> is active, modify its rules to allow incoming UDP
        connections via port 8472.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt root"># </code>firewall-cmd --permanent --add-port=8472/udp &amp;&amp; firewall-cmd --reload</pre></div></li></ol></div></div></section><section xml:lang="en" class="sect1" id="vxlan-create-vlan" data-id-title="Creating a virtual network"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">3 </span><span class="title-name">Creating a virtual network</span></span> <a title="Permalink" class="permalink" href="index.html#vxlan-create-vlan">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div><div><div class="abstract"/></div></div></div><p>
    Virtual machines need a virtual network that uses the network bridge
    <code class="literal">br0</code> to be able to communicate via a VXLAN attached to
    that bridge. Run the following procedure on the VM Host Server to add such a virtual
    network to the <code class="systemitem">libvirtd</code> service.
  </p><div class="procedure"><div class="procedure-contents"><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">Requirements </span></span><a title="Permalink" class="permalink" href="index.html#id-1.4.3.1">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
          You installed <code class="systemitem">libvirt</code> virtualization tools and the <code class="systemitem">libvirtd</code>
          service is enabled and started.
        </p></li><li class="listitem"><p>
          You configured the network bridge <code class="literal">br0</code> with the
          VXLAN attached on <span class="phrase"><span class="phrase">SLES</span></span>.
        </p></li></ul></div><ol class="procedure" type="1"><li class="step"><p>
        Create a temporary XML file (<code class="filename">/tmp/vxlan1-br0.xml</code>)
        that defines a new virtual network. The file should be similar to the
        following one:
      </p><div class="verbatim-wrap"><pre class="screen">&lt;network&gt;
&lt;name&gt;vxlan1-br0&lt;/name&gt;
&lt;forward mode="bridge" /&gt;
&lt;bridge name="br0" /&gt;
&lt;/network&gt;</pre></div></li><li class="step"><p>
        Use the XML file to create a new <code class="systemitem">libvirt</code>-based virtual network.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh net-define /tmp/vxlan1-br0.xml</pre></div></li><li class="step"><p><span class="step-optional">(Optional)</span> 
        Remove the XML definition file from disk. It is no longer needed.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code>rm /tmp/vxlan1-br0.xml</pre></div></li><li class="step"><p>
        Start the new <code class="literal">vxlan1-br0</code> virtual network and
        configure it to start automatically when the <code class="systemitem">libvirtd</code> service starts.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh net-start vxlan1-br0
<code class="prompt user">&gt; </code><code class="command">sudo</code> virsh net-autostart vxlan1-br0</pre></div></li><li class="step"><p>
        Verify the status of the newly created network. If the newly created
        virtual network is listed as active, the configuration was successful.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh net-list
Name              State    Autostart   Persistent
----------------------------------------------------
vxlan1-br0        active   yes         yes</pre></div></li></ol></div></div></section><section xml:lang="en" class="sect1" id="vxlan-configure-vm" data-id-title="Configuring virtual machines"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">4 </span><span class="title-name">Configuring virtual machines</span></span> <a title="Permalink" class="permalink" href="index.html#vxlan-configure-vm">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div><div><div class="abstract"/></div></div></div><p>
    You need to configure virtual machines to use the virtual network
    <code class="literal">vxlan1-br0</code> to communicate via a network bridge with an
    attached VXLAN network.
  </p><div id="id-1.5.3" data-id-title="Configuring new VMs to use VXLAN" class="admonition tip normal"><img class="symbol" alt="Tip" title="Tip" src="static/images/icon-tip.svg"/><div class="admon-title">Tip: Configuring new VMs to use VXLAN</div><p>
      To attach a new VM to a VXLAN network, configure it to use the
      <code class="literal">vxlan1-br0</code> network when creating the VM. If you use the
      <code class="command">virt-install</code> tool to create VMs, for example, pass the
      <code class="option">--network network:vxlan1-br0</code> option to it.
    </p></div><p>
    The following procedure describes how to adjust an existing VM. Our example
    virtual machine <em class="replaceable">VM1</em> is running on host
    <em class="replaceable">SLES-HOST-A</em>.
  </p><div class="procedure"><div class="procedure-contents"><div class="itemizedlist"><div class="title-container"><div class="itemizedlist-title-wrap"><div class="itemizedlist-title"><span class="title-number-name"><span class="title-name">Requirements </span></span><a title="Permalink" class="permalink" href="index.html#id-1.5.5.1">#</a></div></div><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div><ul class="itemizedlist"><li class="listitem"><p>
          You created a VM using <code class="systemitem">libvirt</code>.
        </p></li><li class="listitem"><p>
          You configured the virtual network <code class="literal">vxlan1-br0</code> using
          <code class="systemitem">libvirt</code>.
        </p></li></ul></div><ol class="procedure" type="1"><li class="step"><p>
        Connect the network interface of the VM to the virtual network
        <code class="literal">vxlan1-br0</code>.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virt-xml <em class="replaceable">VM1</em> --edit --network network=vxlan1-br0</pre></div></li><li class="step"><p>
        Restart the VM, for example:
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh shutdown <em class="replaceable">VM1</em>
<code class="prompt user">&gt; </code><code class="command">sudo</code> virsh start <em class="replaceable">VM1</em></pre></div></li><li class="step"><p>
        Verify the virtual network interfaces on the host.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> virsh domiflist <em class="replaceable">VM1</em>
Interface   Type     Source           Model    MAC
-------------------------------------------------------------------
vnet1<span class="callout" id="co-vxlan-vnet1">1</span>    bridge   vxlan1-br0<span class="callout" id="co-vxlan-br">2</span>    virtio   52:54:12:a7:89:1f
[...]</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-vxlan-vnet1"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            A virtual network automatically created by <code class="systemitem">libvirt</code>. It is used by
            the virtual machine <em class="replaceable">VM1</em>.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-vxlan-br"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            A network bridge with the attached VXLAN network. The
            <code class="literal">vnet1</code> network is connected to that bridge.
          </p></td></tr></table></div></li><li class="step"><p>
        Verify the interface attached to the <code class="literal">vxlan1-br0</code>
        network bridge on the host.
      </p><div class="verbatim-wrap"><pre class="screen"><code class="prompt user">&gt; </code><code class="command">sudo</code> ip link show master vxlan1-br0
[...]
14: vxlan1:<span class="callout" id="co-vxlan-vxlan">1</span> &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br0 state UNKNOWN mode DEFAULT group default qlen 1000
    link/ether 2a:53:bd:d5:b3:0a brd ff:ff:ff:ff:ff:ff
15: vnet1:<span class="callout" id="co-vxlan-vnet2">2</span> &lt;BROADCAST,MULTICAST,UP,LOWER_UP&gt; mtu 1500 qdisc noqueue master br0 state UNKNOWN mode DEFAULT group default qlen 1000
    link/ether 52:54:12:a7:89:1f brd ff:ff:ff:ff:ff:ff</pre></div><div class="calloutlist"><table style="border: 0; "><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-vxlan-vxlan"><span class="callout">1</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            The configured VXLAN network attached to the
            <code class="literal">vxlan1-br0</code> bridge.
          </p></td></tr><tr><td style="width: 5%; vertical-align: top; text-align: left; "><p><a href="#co-vxlan-vnet2"><span class="callout">2</span></a> </p></td><td style="vertical-align: top; text-align: left; "><p>
            A virtual network automatically created by <code class="systemitem">libvirt</code>. It is used by
            the virtual machine <em class="replaceable">VM1</em>.
          </p></td></tr></table></div></li></ol></div></div></section><section class="sect1" id="legal-disclaimer" data-id-title="Legal Notice"><div class="titlepage"><div><div><div class="title-container"><h2 class="title"><span class="title-number-name"><span class="title-number">5 </span><span class="title-name">Legal Notice</span></span> <a title="Permalink" class="permalink" href="index.html#legal-disclaimer">#</a></h2><div class="icons"><a target="_blank" class="icon-reportbug" title="Report an issue"> </a></div></div></div></div></div><p> Copyright© 2006–2024
 SUSE LLC and contributors.
  All rights reserved. </p><p>
    Permission is granted to copy, distribute and/or modify this document under the terms of the
    GNU Free Documentation License, Version 1.2 or (at your option) version 1.3; with the Invariant
    Section being this copyright notice and license. A copy of the license version 1.2 is included
    in the section entitled <span class="quote">“<span class="quote">GNU Free Documentation License</span>”</span>.
  </p><p>
    For SUSE trademarks, see <a class="link" href="https://www.suse.com/company/legal/" target="_blank">https://www.suse.com/company/legal/</a>. All other
    third-party trademarks are the property of their respective owners. Trademark symbols (®, ™
    etc.) denote trademarks of SUSE and its affiliates. Asterisks (*) denote third-party
    trademarks.
  </p><p>
    All information found in this book has been compiled with utmost attention to detail. However,
    this does not guarantee complete accuracy.  Neither SUSE LLC, its affiliates, the authors, nor
    the translators shall be held liable for possible errors or the consequences thereof.
  </p></section></section><nav class="bottom-pagination"><div> </div><div><a class="pagination-link next" href="doc-gfdl-license.html"><span class="pagination-relation">Next</span><span class="pagination-label"><span class="title-number">Appendix A </span>GNU Free Documentation License</span></a> </div></nav></article><aside id="_side-toc-page" class="side-toc"><div class="side-title">On this page</div><div class="toc"><ul><li><span class="section"><a href="index.html#vxlan-introduction"><span class="title-number">1 </span><span class="title-name">Introduction</span></a></span></li><li><span class="section"><a href="index.html#vxlan-configure-bridge"><span class="title-number">2 </span><span class="title-name">Creating a network bridge with a VXLAN attached</span></a></span></li><li><span class="section"><a href="index.html#vxlan-create-vlan"><span class="title-number">3 </span><span class="title-name">Creating a virtual network</span></a></span></li><li><span class="section"><a href="index.html#vxlan-configure-vm"><span class="title-number">4 </span><span class="title-name">Configuring virtual machines</span></a></span></li><li><span class="section"><a href="index.html#legal-disclaimer"><span class="title-number">5 </span><span class="title-name">Legal Notice</span></a></span></li><li><span class="appendix"><a href="doc-gfdl-license.html"><span class="title-number">A </span><span class="title-name">GNU Free Documentation License</span></a></span></li></ul></div><div class="side-title">Share this page</div><ul class="share"><li><a id="_share-fb" href="#" title="Facebook"> </a></li><li><a id="_share-in" href="#" title="LinkedIn"> </a></li><li><a id="_share-tw" href="#" title="Twitter/X"> </a></li><li><a id="_share-mail" href="#" title="E-Mail"> </a></li><li><a id="_print-button" href="#" title="Print this page"> </a></li></ul> </aside></main><footer id="_footer"><div class="growth-inhibitor"><div class="copy"><span class="copy__rights">© SUSE
                 2024</span></div></div></footer></body></html>